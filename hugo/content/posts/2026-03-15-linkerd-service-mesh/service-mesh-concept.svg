<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 440" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <rect width="800" height="440" fill="#1a1a2e" rx="8"/>
  <text x="400" y="36" text-anchor="middle" fill="#e6b422" font-size="16" font-weight="600">Service Mesh: Before &amp; After</text>

  <!-- BEFORE side -->
  <text x="200" y="66" text-anchor="middle" fill="#e06060" font-size="13" font-weight="600">Without Service Mesh</text>

  <!-- Service A -->
  <rect x="60" y="90" width="120" height="50" rx="6" fill="#16213e" stroke="#e06060" stroke-width="1.5"/>
  <text x="120" y="113" text-anchor="middle" fill="#c0c0d0" font-size="11" font-weight="600">Web UI</text>
  <text x="120" y="130" text-anchor="middle" fill="#a0a0b0" font-size="9">plaintext HTTP</text>

  <!-- Service B -->
  <rect x="230" y="90" width="120" height="50" rx="6" fill="#16213e" stroke="#e06060" stroke-width="1.5"/>
  <text x="290" y="113" text-anchor="middle" fill="#c0c0d0" font-size="11" font-weight="600">API Server</text>
  <text x="290" y="130" text-anchor="middle" fill="#a0a0b0" font-size="9">plaintext HTTP</text>

  <!-- Service C -->
  <rect x="60" y="200" width="120" height="50" rx="6" fill="#16213e" stroke="#e06060" stroke-width="1.5"/>
  <text x="120" y="223" text-anchor="middle" fill="#c0c0d0" font-size="11" font-weight="600">Worker</text>
  <text x="120" y="240" text-anchor="middle" fill="#a0a0b0" font-size="9">no retries</text>

  <!-- Service D -->
  <rect x="230" y="200" width="120" height="50" rx="6" fill="#16213e" stroke="#e06060" stroke-width="1.5"/>
  <text x="290" y="223" text-anchor="middle" fill="#c0c0d0" font-size="11" font-weight="600">Database</text>
  <text x="290" y="240" text-anchor="middle" fill="#a0a0b0" font-size="9">unencrypted</text>

  <!-- Messy arrows (before) -->
  <defs>
    <marker id="ra" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e06060"/>
    </marker>
    <marker id="ga" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a9e4a"/>
    </marker>
    <marker id="ya" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="8" markerHeight="6" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e6b422"/>
    </marker>
  </defs>

  <line x1="180" y1="115" x2="228" y2="115" stroke="#e06060" stroke-width="1.5" marker-end="url(#ra)"/>
  <line x1="180" y1="120" x2="228" y2="210" stroke="#e06060" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#ra)"/>
  <line x1="290" y1="140" x2="290" y2="198" stroke="#e06060" stroke-width="1.5" marker-end="url(#ra)"/>
  <line x1="120" y1="140" x2="120" y2="198" stroke="#e06060" stroke-width="1" stroke-dasharray="4,3" marker-end="url(#ra)"/>
  <line x1="180" y1="225" x2="228" y2="225" stroke="#e06060" stroke-width="1.5" marker-end="url(#ra)"/>

  <!-- Problems list -->
  <text x="200" y="290" text-anchor="middle" fill="#e06060" font-size="10">✗ No encryption between services</text>
  <text x="200" y="306" text-anchor="middle" fill="#e06060" font-size="10">✗ No observability into traffic</text>
  <text x="200" y="322" text-anchor="middle" fill="#e06060" font-size="10">✗ Retries coded into every app</text>
  <text x="200" y="338" text-anchor="middle" fill="#e06060" font-size="10">✗ No traffic policies</text>

  <!-- Divider -->
  <line x1="400" y1="60" x2="400" y2="420" stroke="#2a2a4a" stroke-width="1" stroke-dasharray="4,4"/>

  <!-- AFTER side -->
  <text x="600" y="66" text-anchor="middle" fill="#4a9e4a" font-size="13" font-weight="600">With Service Mesh</text>

  <!-- Service A + Proxy -->
  <rect x="460" y="85" width="155" height="60" rx="6" fill="#16213e" stroke="#4a9e4a" stroke-width="1.5"/>
  <rect x="465" y="90" width="80" height="50" rx="4" fill="#0f3460"/>
  <text x="505" y="113" text-anchor="middle" fill="#c0c0d0" font-size="10" font-weight="600">Web UI</text>
  <text x="505" y="128" text-anchor="middle" fill="#a0a0b0" font-size="8">app</text>
  <rect x="550" y="90" width="60" height="50" rx="4" fill="#1a4a1a" stroke="#4a9e4a" stroke-width="1"/>
  <text x="580" y="113" text-anchor="middle" fill="#4a9e4a" font-size="8" font-weight="600">proxy</text>
  <text x="580" y="128" text-anchor="middle" fill="#4a9e4a" font-size="7">sidecar</text>

  <!-- Service B + Proxy -->
  <rect x="640" y="85" width="155" height="60" rx="6" fill="#16213e" stroke="#4a9e4a" stroke-width="1.5"/>
  <rect x="645" y="90" width="80" height="50" rx="4" fill="#0f3460"/>
  <text x="685" y="113" text-anchor="middle" fill="#c0c0d0" font-size="10" font-weight="600">API Server</text>
  <text x="685" y="128" text-anchor="middle" fill="#a0a0b0" font-size="8">app</text>
  <rect x="730" y="90" width="60" height="50" rx="4" fill="#1a4a1a" stroke="#4a9e4a" stroke-width="1"/>
  <text x="760" y="113" text-anchor="middle" fill="#4a9e4a" font-size="8" font-weight="600">proxy</text>
  <text x="760" y="128" text-anchor="middle" fill="#4a9e4a" font-size="7">sidecar</text>

  <!-- Service C + Proxy -->
  <rect x="460" y="195" width="155" height="60" rx="6" fill="#16213e" stroke="#4a9e4a" stroke-width="1.5"/>
  <rect x="465" y="200" width="80" height="50" rx="4" fill="#0f3460"/>
  <text x="505" y="223" text-anchor="middle" fill="#c0c0d0" font-size="10" font-weight="600">Worker</text>
  <text x="505" y="238" text-anchor="middle" fill="#a0a0b0" font-size="8">app</text>
  <rect x="550" y="200" width="60" height="50" rx="4" fill="#1a4a1a" stroke="#4a9e4a" stroke-width="1"/>
  <text x="580" y="223" text-anchor="middle" fill="#4a9e4a" font-size="8" font-weight="600">proxy</text>
  <text x="580" y="238" text-anchor="middle" fill="#4a9e4a" font-size="7">sidecar</text>

  <!-- Service D + Proxy -->
  <rect x="640" y="195" width="155" height="60" rx="6" fill="#16213e" stroke="#4a9e4a" stroke-width="1.5"/>
  <rect x="645" y="200" width="80" height="50" rx="4" fill="#0f3460"/>
  <text x="685" y="223" text-anchor="middle" fill="#c0c0d0" font-size="10" font-weight="600">Database</text>
  <text x="685" y="238" text-anchor="middle" fill="#a0a0b0" font-size="8">app</text>
  <rect x="730" y="200" width="60" height="50" rx="4" fill="#1a4a1a" stroke="#4a9e4a" stroke-width="1"/>
  <text x="760" y="223" text-anchor="middle" fill="#4a9e4a" font-size="8" font-weight="600">proxy</text>
  <text x="760" y="238" text-anchor="middle" fill="#4a9e4a" font-size="7">sidecar</text>

  <!-- mTLS arrows (after) -->
  <line x1="612" y1="115" x2="638" y2="115" stroke="#4a9e4a" stroke-width="2" marker-end="url(#ga)"/>
  <line x1="612" y1="120" x2="638" y2="210" stroke="#4a9e4a" stroke-width="1.5" marker-end="url(#ga)"/>
  <line x1="760" y1="145" x2="760" y2="193" stroke="#4a9e4a" stroke-width="1.5" marker-end="url(#ga)"/>
  <line x1="580" y1="145" x2="580" y2="193" stroke="#4a9e4a" stroke-width="1.5" marker-end="url(#ga)"/>
  <line x1="612" y1="225" x2="638" y2="225" stroke="#4a9e4a" stroke-width="2" marker-end="url(#ga)"/>

  <!-- mTLS labels -->
  <text x="626" y="103" text-anchor="middle" fill="#4a9e4a" font-size="7">mTLS</text>
  <text x="626" y="213" text-anchor="middle" fill="#4a9e4a" font-size="7">mTLS</text>

  <!-- Benefits list -->
  <text x="600" y="295" text-anchor="middle" fill="#4a9e4a" font-size="10">✓ Automatic mTLS encryption</text>
  <text x="600" y="311" text-anchor="middle" fill="#4a9e4a" font-size="10">✓ Golden metrics per service</text>
  <text x="600" y="327" text-anchor="middle" fill="#4a9e4a" font-size="10">✓ Retries &amp; timeouts at proxy level</text>
  <text x="600" y="343" text-anchor="middle" fill="#4a9e4a" font-size="10">✓ Zero code changes required</text>

  <!-- Control Plane label -->
  <rect x="505" y="365" width="190" height="40" rx="6" fill="#0f3460" stroke="#e6b422" stroke-width="1"/>
  <text x="600" y="385" text-anchor="middle" fill="#e6b422" font-size="10" font-weight="600">Control Plane</text>
  <text x="600" y="399" text-anchor="middle" fill="#a0a0b0" font-size="8">manages all proxies automatically</text>

  <!-- Dashed lines from control plane to proxies -->
  <line x1="550" y1="365" x2="580" y2="252" stroke="#e6b422" stroke-width="1" stroke-dasharray="3,3"/>
  <line x1="650" y1="365" x2="760" y2="252" stroke="#e6b422" stroke-width="1" stroke-dasharray="3,3"/>
</svg>
